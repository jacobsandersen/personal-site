---
import HFeedRenderer from "~/components/microformat/hfeed/HFeedRenderer.astro";
import PageLayout from "~/layouts/PageLayout.astro";
import { QueryParams, queryPosts } from "~/lib/scribble/scribble";
import { validateYearForPath } from "~/util/url";

const { year } = Astro.params;
if (!validateYearForPath(year)) {
    return new Response(null, { status: 404 });
}

const queryParams: QueryParams = {
    year: Number(year!)
}

const results = await queryPosts(queryParams);
const title = `Posts from ${year}`;
---

<PageLayout title={`Posts from ${year}`}>
    <HFeedRenderer posts={results} feedInfo={{title, url:`/${year}`}} />
</PageLayout>

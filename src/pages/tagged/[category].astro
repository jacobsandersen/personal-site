---
import HFeedRenderer from "~/components/microformat/hfeed/HFeedRenderer.astro";
import BaseLayout from "~/layouts/BaseLayout.astro";
import { QueryParams, queryPosts } from "~/lib/scribble/scribble";

const { category } = Astro.params;
if (category!.toLowerCase() === "uncategorized") {
    return Astro.redirect("/uncategorized");
}

const queryParams: QueryParams = {
    type: "h-entry",
    category: category!,
};

const posts = await queryPosts(queryParams);

const title = `Posts tagged with #${category}`;
---

<BaseLayout title={title}>
    <HFeedRenderer
        posts={posts}
        feedInfo={{ title, url: `/tagged/${category}` }}
    />
</BaseLayout>

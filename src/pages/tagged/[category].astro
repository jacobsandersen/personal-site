---
import HFeedRenderer from '~/components/microformat/hfeed/HFeedRenderer.astro';
import PageLayout from '~/layouts/PageLayout.astro'
import { QueryParams, queryPosts } from '~/lib/scribble/scribble';

const { category } = Astro.params
if (category!.toLowerCase() === "uncategorized") {
    return Astro.redirect("/uncategorized")
}

const queryParams: QueryParams = {
    category: category!,
}

const posts = await queryPosts(queryParams);

const title = `Posts tagged with #${category}`;
---

<PageLayout title={title}>
    <HFeedRenderer posts={posts} feedInfo={{title, url:`/tagged/${category}`}} />
</PageLayout>
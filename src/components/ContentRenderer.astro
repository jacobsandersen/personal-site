---
import { Content } from '~/lib/content'
import ExternalLink from './util/ExternalLink.astro'
import Map, { OpenStreetMapTileData } from './post-fragments/Map.astro'
import HtmlRenderer from './HtmlRenderer.astro'
import ContainerRenderer from './ContainerRenderer.astro'
import StylizedQuote from './post-fragments/StylizedQuote.astro'

interface Props {
    content: Content
}

const { content } = Astro.props as Props
---

{(() => {
    switch (content.type) {
        case 'text':
            return <p class:list={[...content.classes]}>{content.text}</p>
        case 'stylized-quote':
            return <StylizedQuote class={content.classes}>{content.text}</StylizedQuote>
        case 'html':
            return <HtmlRenderer html={content.html} class={content.classes} />
        case 'link':
            const text = content.text ?? content.url
            if (content.external) {
                return <ExternalLink href={content.url}>{text}</ExternalLink>
            } else {
                return <a href={content.url}>{text}</a>
            }
        case 'image':
            return <img src={content.url} alt={content.alt} class="tw:max-w-1/2 tw:h-auto tw:border-2 tw:rounded-sm" />
        case 'container':
            return <ContainerRenderer
                class={content.classes}
                items={content.items} 
            />
        case 'map':
            return <Map 
                latitude={content.latitude} 
                longitude={content.longitude} 
                zoom={13} 
                tileData={OpenStreetMapTileData} 
                class="tw:w-full tw:h-64" 
            />
        default:
            return <p>Unsupported content type: {content.type}</p>
    }
})()}